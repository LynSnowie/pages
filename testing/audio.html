<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="About Snowy">
        <meta name="author" content="Lyn Snow">
		<title>Snowy's Site - About Snowy</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="language" content="English">
        <link href="https://fonts.googleapis.com/css?family=Work+Sans:100,200,300,400,700,800" rel="stylesheet">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/open-iconic-bootstrap.min.css">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/animate.css">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/owl.carousel.min.css">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/owl.theme.default.min.css">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/magnific-popup.css">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/aos.css">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/ionicons.min.css">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/bootstrap-datepicker.css">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/jquery.timepicker.css">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/flaticon.css">
        <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/icomoon.css">
		<link rel="stylesheet" href="../../styles.css">
		
        <!-- <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/page_style/about_snowi.css"> -->
        <style>
            /* about_snowy is diffrent, it new lol you idiot */
            /* text, h1, h2, h3, h4, h5, h6, a {
                text-shadow: -1px 0 white, 0 1px white, 1px 0 white, 0 -1px white;
            } */
            body {
                background-color: #481175;
            }
			h2 {
				font-size: 30px;
			}

			h3 {
				font-size: 25px;
				color: black;
				text-shadow: -0.8px 0 white, 0 0.5px white, 0.8px 0 white, 0 -0.5px white;
				padding-bottom: 100px;
			}

			main h1, h2 {
                text-shadow: -1px 0 white, 0 1px white, 1px 0 white, 0 -1px white;
			}

			section ul {
				list-style-type: none;
				padding: 0;
			}

			section ul li:before {
				content: "- ";
			}

			section li {
				font-family: 'Segoe UI';
				font-size: 25px;
				color: black;
				text-shadow: -0.8px 0 white, 0 0.5px white, 0.8px 0 white, 0 -0.5px white;
				position: relative;
				z-index: 10000; /* Higher value for the header */
			}
        </style>

        <!-- <link rel="stylesheet" href="https://lynsnowie.github.io/misc/css/page_style/about_snowi_misc.css"> -->
		<style>
			/* about_snowy_misc */
			input {
				width: 200px;
				padding: 5px;
				border-radius: 5px;
				border: 1px solid #ccc;
				padding: 5px;
				border: 1px solid #000000;
				box-shadow: inset 0 0 5px #000000;
				border-radius: 5px;
				outline: none;
				margin-bottom: 10px;
				padding: 10px;
				border-radius: 5px;
				border: 1px solid #ccc;
			}

			input:focus {
				box-shadow: inset 0 0 5px #0078d7, 0 0 5px #0078d7;
			}

			button {
				/* display: inline-block; */
				padding: 10px 20px;
				font: bold 15px Arial;
				cursor: pointer;
				/* text-align: center; */
				/* text-decoration: none; */
				outline: none;
				color: black;
				background-color: white;
				border: none;
				border-radius: 15px;
				box-shadow: 0 9px #999;
				border-top: 1px solid #F8F8FF;
				border-right: 1px solid #3b3b3b;
				border-bottom: 1px solid #3b3b3b;
				border-left: 1px solid #F8F8FF;

				padding:10px;
				border-radius: 5px;
				border: none;
				background-color:#007BFF;
				color:#fff;
			}

			button:hover {
				transform: scale(1.07);
			}

			button:active {
				background-color: #FEFEFA;
				box-shadow: 0 5px #666;
				transform: translateY(4px);
			}

		</style>

		<style>
			.currently-playing {
				position: relative;
				display: flex;
				flex-direction: column;
				align-items: center;
			}

			canvas {
				position: absolute;
				bottom: 10px;
				width: 300px;
				height: 50px;
			}
		</style>
	</head>
	<body>
		<header>
			<div class="header-container">
				<h1><span class="highlight">Kitsune</span> Hub</h1>
				<nav>
					<ul>
						<ul id="header-nav"></ul>
					</ul>
				</nav>
			</div>
		</header>

		<main>

			<div class="currently-playing">
				<canvas id="visualizer"></canvas>
			</div>
		</main>
		
		<footer>
			<div class="footer-container">
				<h1><span class="highlight">Kitsune</span> Hub</h1>
				<nav>
					<ul>
						<ul id="footer-nav"></ul>
					</ul>
				</nav>
			</div>
		</footer>
		<script src="../../js/oneko.js"></script>
		<script src="../../js/jquery.min.js"></script>
		<script src="../../js/jquery-migrate-3.0.1.min.js"></script>
		<script src="../../js/popper.min.js"></script>
		<script src="../../js/bootstrap.min.js"></script>
		<script src="../../js/jquery.easing.1.3.js"></script>
		<script src="../../js/jquery.waypoints.min.js"></script>
		<script src="../../js/jquery.stellar.min.js"></script>
		<script src="../../js/owl.carousel.min.js"></script>
		<script src="../../js/jquery.magnific-popup.min.js"></script>
		<!-- <script src="../../js/aos.js"></script> -->
		<script src="../../js/jquery.animateNumber.min.js"></script>
		<script src="../../js/bootstrap-datepicker.js"></script>
		<script src="../../js/jquery.timepicker.min.js"></script>
		<script src="../../js/scrollax.min.js"></script>
		<!-- <script src="../../js/main.js"></script> -->
		<script src="../../js/pages/snowy.js"></script> <!-- snowi -->
		<script src="../../js/pages/home.js" defer></script>

		<script>
			const canvas = document.getElementById("visualizer");
			const ctx = canvas.getContext("2d");


			const bgMusic = [
				// "Miss You",
				// "Somebody That I Used To Know",
				// "Bodies",
				// "Radioactive",
				// // "Free Bird",
				// // "Ice Cream Song Lyrics",
				// "I Don't Care Anymore",
				// "Ripped Pants",
				// "Monster",
				// "Lonely Day", //System Of A Down - Lonely Day (Official HD Video)
				"Down Under",
			];
	        
			const chosenMusic = bgMusic[Math.floor(Math.random() * bgMusic.length)];
	        const audio = new Audio("https://github.com/sourcesounds/tf/raw/master/sound/music/mvm_start_wave.wav");
			
			// audio.crossOrigin = "anonymous";

			switch (chosenMusic)
			{
				case "Down Under":
					audio.src = `../../misc/snow/music/main/1.%20Down%20Under.mp3`;
				default:
					console.log("test log 295");
					console.log(chosenMusic)
			}

	        audio.loop = true;
	

			audio.addEventListener("play", () => {
				const audioContext = new AudioContext();
				const audioSource = audioContext.createMediaElementSource(audio);
				const analyser = audioContext.createAnalyser();

				audioSource.connect(analyser);
				analyser.connect(audioContext.destination);

				analyser.fftSize = 64;
				const bufferLength = analyser.frequencyBinCount;
				const dataArray = new Uint8Array(bufferLength);

				function draw() {
					requestAnimationFrame(draw);

					analyser.getByteFrequencyData(dataArray);

					ctx.clearRect(0, 0, canvas.width, canvas.height);
					dataArray.forEach((value, index) => {
					const barHeight = value / 2;
					const x = index * 15;

					ctx.fillStyle = "rgba(0, 255, 0, 0.6)";
					ctx.fillRect(x, canvas.height - barHeight, 10, barHeight);
					});
				}

				draw();
			});

	        function pageLoad() {
	            if (localStorage.getItem("snowy bg") == undefined || localStorage.getItem("snowy bg") == null || localStorage.getItem("snowy bg") == "true") {
	                console.log(localStorage.getItem("snowy bg"));
	                localStorage.setItem("snowy bg", "false");
	            }
	
	            if (localStorage.getItem("snowy bg") == "false" || !audio.paused) {
	                localStorage.setItem("snowy bg", "true");
	                audio.play();
	            }
	        }
	
	        window.addEventListener('visibilitychange', () => {
	            if (document.visibilityState === 'visible') { // Tab is active
	                if (localStorage.getItem("snowy bg") == "false" || !audio.paused) {
                        localStorage.setItem("snowy bg", "true");
	                    audio.play();
	                }
	            } else { // Tab is not active
	            	audio.pause();
	                localStorage.setItem("snowy bg", "false")
	            }
	        });
	
	        if (chosenMusic == "Miss You") {
	            audio.volume = 0.2;
	        } else if (chosenMusic == "Somebody That I Used To Know") {
				audio.volume = 0.2;
	        } else if (chosenMusic == "Bodies") {
	            audio.volume = 0.2;
	        } else if (chosenMusic == "Radioactive") {
	            audio.volume = 0.2;
			} else if (chosenMusic == "Free Bird") {
	            audio.volume = 0.2;
	        } else if (chosenMusic == "Ice Cream Song Lyrics") {
	            audio.volume = 0.2;
	        } else if (chosenMusic == "I Don't Care Anymore") {
	            audio.volume = 0.2;
	        } else if (chosenMusic == "Ripped Pants") {
	            audio.volume = 0.2;
	        } else if (chosenMusic == "Monster") {
                audio.volume = 0.2;
	        } else if (chosenMusic == "Lonely Day") {
	            audio.volume = 0.2;
	        // } else {
			// 	audio.volume = 0.5;
	        }
	
	    	window.onload = pageLoad;
	    </script>
	</body>
</html>
